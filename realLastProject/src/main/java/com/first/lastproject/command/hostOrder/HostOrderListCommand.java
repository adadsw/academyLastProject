package com.first.lastproject.command.hostOrder;

import java.util.ArrayList;
import org.springframework.ui.Model;

import com.first.lastproject.dao.order.InterfaceOrderDao;
import com.first.lastproject.dao.order.OrderDao;
import com.first.lastproject.dto.HostOrderListDto;
import com.first.lastproject.dto.OrderDto;

public class HostOrderListCommand implements HostOrderCommand {

	@Override
	public String execute(Model model) {

		InterfaceOrderDao orderDao = OrderDao.getInstance();
		ArrayList<OrderDto> order_done = orderDao.getUndoneOrder();

		if (order_done != null) { //메뉴가 안 나간 주문이 존재할 경우.
			ArrayList<HostOrderListDto> hostOrderlistDtoArray = new ArrayList<HostOrderListDto>();
			ArrayList<String> foodNameArray = new ArrayList<String>();
			
			for (int i = 0; i < order_done.size(); i++) { //출력할 주문메뉴 합치기 작업
				String food_name = orderDao.concatFoodName(order_done.get(i).getOrder_id());
				foodNameArray.add(food_name);
			}
			
			for (int i = 0; i < order_done.size(); i++) {
				HostOrderListDto holDto = new HostOrderListDto();
				holDto.setFood_name(foodNameArray.get(i));
				holDto.setOrder_id(order_done.get(i).getOrder_id());
				holDto.setSeat_num(order_done.get(i).getSeat_num());
				hostOrderlistDtoArray.add(holDto);
			}

			model.addAttribute("hostOrderlistDtoArray", hostOrderlistDtoArray);
		}

		return "host/order/orderList";
	}

}
